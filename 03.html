<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<canvas id="demo" ></canvas>
</body>
<script>
    (function(){
        var canvas=document.querySelector("#demo");
        var ctx=canvas.getContext('2d');
        canvas.width=600;
        canvas.height=600;

        canvas.style.border="1px solid #000";
//        ctx.moveTo(100,500);
//        ctx.lineTo(100,100);
//        ctx.lineTo(90,110);
//        ctx.moveTo(100,100);
//        ctx.lineTo(110,110);
//        ctx.moveTo(100,500);
//        ctx.lineTo(500,500);
//        ctx.lineTo(490,490);
//        ctx.moveTo(500,500);
//        ctx.lineTo(490,510);
//
//
//        ctx.strokeStyle="green";
//
//        ctx.stroke();
//        ctx.beginPath();
//
//        ctx.moveTo(100,500);
//        ctx.lineTo(130,450);
//        ctx.strokeStyle="red";
//        ctx.stroke();
//
//
//        ctx.rect(100,100,50,100);
//        ctx.stroke();
//
//        ctx.strokeRect(200,200,100,150);
//        ctx.moveTo(300,300);
//        ctx.fillStyle='red';
//        ctx.arc(300,300,100,-90*Math.PI/180,-30*Math.PI/180);
//        ctx.closePath();
//        ctx.fill();
//        ctx.stroke();

        var data = [{
            "value": .2,
            "color": "red",
            "title": "应届生"
        },{
            "value": .3,
            "color": "blue",
            "title": "社会招生"
        },{
            "value": .4,
            "color": "green",
            "title": "老学员推荐"
        },{
            "value": .1,
            "color": "#ccc",
            "title": "公开课"
        }];
        var d=0;
        for(var i=0;i<data.length;i++){
            ctx.beginPath();
            ctx.moveTo(300,300);
            ctx.arc(300,300,200,d*Math.PI/180,(d+data[i].value*360)*Math.PI/180);
            ctx.fillStyle=data[i].color;
            ctx.closePath();
            ctx.stroke();
            ctx.fill();


            var txt=data[i].value*100+'%';
            var x,y;
            x=300+240*Math.cos((d+data[i].value*360/2)*Math.PI/180);
            y=300+240*Math.sin((d+data[i].value*360/2)*Math.PI/180);
            ctx.textAlign='start';
            if(((d+data[i].value*360/2)>90)&&((d+data[i].value*360/2)<270)){
                ctx.textAlign='end';
            }

            ctx.fillText(txt,x,y);
//           ctx.fill();






            d+=data[i].value*360;
        }





    }());
</script>
</html>